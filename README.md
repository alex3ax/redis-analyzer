# Redis Analyzer

üìä CLI-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∫–ª—é—á–µ–π –≤ Redis:
- –î–µ—Ç–µ–∫—Ç–∏—Ä—É–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã –ø–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É
- –°—á–∏—Ç–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É TTL (–≤ —Ç.—á. –∫–ª—é—á–∏ –±–µ–∑ TTL)
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç—á—ë—Ç—ã `.csv`

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –ß–µ—Ä–µ–∑ shell (Linux/macOS)

```bash
curl -sS https://raw.githubusercontent.com/alex3ax/redis-analyzer/main/scripts/install.sh | bash
```

–∏–ª–∏ —Å –ø–æ–º–æ—â—å—é `wget`:

```bash
wget -q https://raw.githubusercontent.com/alex3ax/redis-analyzer/main/scripts/install.sh -O - | bash
```

> –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∫–∞—á–∞–µ—Ç –±–∏–Ω–∞—Ä–Ω–∏–∫ –¥–ª—è –≤–∞—à–µ–π –û–° –∏–∑ [GitHub Releases](https://github.com/alex3ax/redis-analyzer/releases) –∏ –ø–æ–ª–æ–∂–∏—Ç –≤ `/usr/local/bin`.

---

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
redis-analyzer --addr localhost:6379 --match "cache:*" --export report.csv
```

### –ê—Ä–≥—É–º–µ–Ω—Ç—ã

| –§–ª–∞–≥            | –û–ø–∏—Å–∞–Ω–∏–µ                                           | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é        |
|------------------|----------------------------------------------------|-------------------------------|
| `--addr`         | –ê–¥—Ä–µ—Å Redis                                        | `localhost:6379`              |
| `--password`     | –ü–∞—Ä–æ–ª—å Redis (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è)                      | `""`                          |
| `--db`           | –ù–æ–º–µ—Ä –±–∞–∑—ã                                         | `0`                           |
| `--match`        | –®–∞–±–ª–æ–Ω –∫–ª—é—á–µ–π –¥–ª—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è                     | `"*"`                         |
| `--workers`      | –ö–æ–ª-–≤–æ –≤–æ—Ä–∫–µ—Ä–æ–≤ (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö —Å–∫–∞–Ω–µ—Ä–æ–≤)            | `5`                           |
| `--short-ttl`    | –ü–æ—Ä–æ–≥ –¥–ª—è ‚Äú–∫–æ—Ä–æ—Ç–∫–∏—Ö‚Äù TTL (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö)              | `86400` (—Å—É—Ç–∫–∏)               |
| `--export`       | –ü—É—Ç—å –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞ CSV-–æ—Ç—á—ë—Ç–∞ –ø–æ –¥—É–±–ª–∏–∫–∞—Ç–∞–º         | `""` (—Ç–æ–ª—å–∫–æ –≤—ã–≤–æ–¥ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª)|
| `--tls`          | Enable TLS connection to Redis                     | `false`                       |

---

## üì¶ –°–±–æ—Ä–∫–∞ –≤—Ä—É—á–Ω—É—é

–¢—Ä–µ–±—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π Go 1.21+.

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞:
```bash
make build
```

### –°–±–æ—Ä–∫–∞ –ø–æ–¥ –≤—Å–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã:
```bash
make release
```

–ë–∏–Ω–∞—Ä–Ω–∏–∫–∏ –∏ –∞—Ä—Ö–∏–≤—ã –±—É–¥—É—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –ø–∞–ø–∫–µ `build/`:
```
build/
‚îú‚îÄ‚îÄ redis-analyzer-linux-amd64.tar.gz
‚îú‚îÄ‚îÄ redis-analyzer-darwin-arm64.zip
...
```

---

## üìã –ü—Ä–∏–º–µ—Ä –æ—Ç—á—ë—Ç–∞ `report.csv`

```csv
count,size_kb,sample
5,123.45,cache:product:latest
3,98.76,cache:variant:234
```

---

## üîê –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –±–µ–∑–æ–ø–∞—Å–µ–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ (—á—Ç–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ `SCAN`, `GET`, `TTL`)
- –ù–µ –∏–∑–º–µ–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ Redis
- –ú–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É –ø—Ä–∏ –±–æ–ª—å—à–æ–º –æ–±—ä—ë–º–µ –∫–ª—é—á–µ–π ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `--match`, `--workers` –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ

---

## üìÑ License

MIT ¬© [Alex "alex3ax" Zakharov](https://github.com/alex3ax)
